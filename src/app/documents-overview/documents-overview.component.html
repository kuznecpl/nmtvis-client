<mat-sidenav-container class="" style="min-height: 800px;">
    <mat-sidenav mode="side" opened style="min-width: 200px;">
        <mat-list>
            <form class="translation-form" style="padding-bottom: 10px; padding-left: 5px; padding-right: 5px;">
                <button style="width: 100%;" type="button" (click)="uploadClick()" mat-raised-button
                        color="accent">Upload
                    Document
                </button>
            </form>
            <mat-divider></mat-divider>
            <div *ngFor="let document of documents;">
                <mat-list-item [ngClass]="{'active-document': selectedDocument == document}" class="document-item"
                               (click)="onClick(document)"> {{
                    document.name }}
                </mat-list-item>
                <mat-divider></mat-divider>
            </div>
        </mat-list>
    </mat-sidenav>
    <mat-sidenav-content>
        <div class="entire-thing" *ngIf="selectedDocument">

            <mat-card class="example-card" style="padding-top: 0px;">

                <div *ngIf="showMetrics">
                    <app-sentences-vis *ngFor="let metric of metrics" [sentences]="selectedDocument.sentences"
                                       [(selectedSentence)]="selectedSentence"
                                       [metric]="metric.name"
                                       [color]="metric.color"
                                       [shortname]="metric.shortname"
                                       (onSort)="sortSentences($event[0], $event[1])">

                    </app-sentences-vis>
                </div>
                <div id="keyphrase-view" style="height:160px">
                    <div style="float:left;display: inline-block;vertical-align: top;width: 19%; height: 100%">
                        <mat-card class="example-card" style="padding: 10px;height: 100%;">
                            <mat-card-header>
                                Keyphrases
                            </mat-card-header>
                            <mat-card-content style="height: 70%;">
                                <div style="overflow-y: scroll;text-align: start;height: 90%;">
                                    <div *ngFor="let topic of topics">
                                        <div class="topic" style="padding:2px;" (mouseenter)="hoverTopic=topic"
                                             (mouseleave)="hoverTopic = null">
                                            <mat-checkbox style="display:inline" [name]="topic.name"
                                                          [(ngModel)]="topic.active" (change)="onActiveTopicChange()">
                                                {{topic.name}} <span style="color: #a8a8a8">{{topic.occurrences}}</span>
                                            </mat-checkbox>
                                        </div>
                                        <mat-divider [inset]="true"></mat-divider>
                                    </div>
                                </div>
                                <mat-form-field style="width:100%;">
                                    <input (keyup.enter)="addTopic(newKeyphrase)" [(ngModel)]="newKeyphrase" matInput
                                           type="text"
                                           placeholder="New Keyphrase">
                                </mat-form-field>
                            </mat-card-content>
                        </mat-card>
                    </div>

                    <div *ngIf="true" style="display: inline-block">
                        <app-parallel-coordinates
                                (onSortMetric)="sortSentences($event[0], $event[1])"
                                [sentences]="allSentences"
                                [topics]="topics"
                                [hoverTopic]="hoverTopic"
                                (onSelectionChange)="onBrushSelectionChange($event)"
                                [(selectedSentence)]="selectedSentence"
                                (onSentenceSelection)="scrollToSentence($event)">

                        </app-parallel-coordinates>
                    </div>
                </div>

                <h3 style="width:45%; display: inline-block;margin-left: 5px;margin-bottom: 0px;">Source</h3>
                <h3 style="width:45%; display: inline-block;margin-bottom: 0px;">Translation</h3>

                <mat-card-content id="document-scroll"
                                  style="text-align: left;overflow-y: scroll; height: 450px;">

                    <mat-progress-spinner *ngIf="loading" style="margin:auto;width:10px;height:10px;"
                                          class="example-margin"
                                          color="primary"
                                          [diameter]="40"
                                          mode="indeterminate">
                    </mat-progress-spinner>

                    <div *ngFor="let sentence of selectedDocument.sentences; let i = index;"
                         style=""
                         class=""
                         (mouseenter)="selectedSentence = sentence;"
                         (mouseleave)="selectedSentence = null;">
                        <div class="sentence" style="padding-top: 5px;font-size: 13px; text-align: justify"
                             [ngClass]="{'active-sentence': selectedSentence == sentence}">
                            <span style="width: 45%;display:inline-block;vertical-align: top;">
                                <a style="text-decoration: none; color: black; vertical-align: middle;"
                                   [id]="'sentence-' + sentence.id"
                                   [routerLink]="['/document', selectedDocument.id, 'sentence', sentence.id]">
                                    <span *ngFor="let word of textPipe.transform(sentence.source).split(' ')"
                                          class="source-word"
                                          [style.background-color]="isHighlighted(word) ? '#ffa50091' : none">
                                        {{word}}
                                    </span>

                                </a>
                            </span>
                            <span style="width: 45%;display: inline-block; vertical-align: top;padding-left: 10px;">
                                <a style="text-decoration: none; color: black; vertical-align: middle;"
                                   [id]="'translation-sentence-' + sentence.id"
                                   [routerLink]="['/document', selectedDocument.id, 'sentence', sentence.id]">

                                    <span class="target-word"
                                          *ngFor="let word of textPipe.transform(sentence.translation, true).split(' ');let j = index;"
                                          ya
                                          [style.background-color]="isHighlightedTarget(sentence, word, j) ? '#ffa50091' : none">
                                        {{word}}
                                    </span>
                                </a>
                            </span>
                            <button style="" type="button"
                                    (click)="onSentenceClick(sentence)"
                                    mat-icon-button
                                    title="Mark translation as corrected">
                                <mat-icon [ngStyle]="{'color': sentence.corrected ? 'green' : 'lightgray'}">check_circle
                                </mat-icon>

                            </button>
                            <button style="" type="button"
                                    (click)="onSentenceClick(sentence)"
                                    mat-icon-button
                                    title="Edit translation">
                                <mat-icon style="color: lightgray">edit
                                </mat-icon>

                            </button>
                        </div>
                        <mat-divider [inset]="true"></mat-divider>
                    </div>
                </mat-card-content>

                <div>
                    <span>Corrected {{ correctedSentences }}</span>

                    <form class="example-form" style="display: inline;margin-left: 20px;">
                        <mat-checkbox (change)="onShowCorrected($event[0])" name="showCorrected"
                                      [(ngModel)]="showCorrected">Show corrected
                        </mat-checkbox>
                    </form>

                    <button type="button" style="float: right;" (click)="onRetrainClick()" mat-raised-button
                            color="primary">{{ retrainText }}
                    </button>
                    <button type="button" style="float: right;margin-right: 10px;" (click)="onRetranslateClick()"
                            mat-raised-button
                            color="primary">{{ retranslateText }}
                    </button>
                </div>

            </mat-card>
        </div>
    </mat-sidenav-content>
</mat-sidenav-container>

